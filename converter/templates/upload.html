<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Convertisseur TEIA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  {% load static %}
  <link rel="stylesheet" href="{% static 'converter/css/style.css' %}"> 
</head>
<body>
  <nav class="navbar">
    <div class="navbar-container">
      <span class="navbar-logo">Convertisseur TEIA</span>
      <ul class="navbar-links">
        <li><a href="#formulaire">📄 Générer un ZIP</a></li>
        <li><a href="#tuto">📘 Tutoriel</a></li>
        <li><a href="#video">🎥 Vidéo</a></li>
      </ul>
    </div>
  </nav>  
  <header>
    <h1>Convertisseur de QI / KFP - TEIA</h1>
    <p>Déposez votre fichier .docx pour générer un export automatiquement</p>
    <strong> Veuillez regarder le modèle </strong>
  </header>
  <main id="formulaire">
    <p style="text-align: center; margin-bottom: 20px;">
      <a href="{% static 'converter/template.docx' %}" download class="button-download">
        📄 Télécharger le modèle .docx
      </a>
    </p>
    
    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit">Générer le ZIP</button>
    </form>
    {% if zip_url %}
    <script>
      window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    </script>
    {% endif %}

  </main>

  <section class="tuto reveal" id="tuto">
    <h2>Comment ça marche ?</h2>
    <ol>
      <li>L’appli ne prend pas en charge TCS ni les Zones à pointer </li>
      <li>le chargement des images (les questions peuvent être préparées mais il faudra insérer les images après)</li>
      <li>Préparez votre fichier Word avec la bonne structure (QI ou KFP bien identifiés). <a href="{% static 'converter/template.docx' %}">
        📄 Télécharger le modèle .docx
      </a><strong>Veillez à bien respecter les indications du Template </strong></li>
      <li>Renseigner les champs : discipline, session, titulaire, année.</li>
      <li>Déposer le fichier .docx et cliquer sur "Générer le ZIP".</li>
      <li>Un seul fichier ZIP sera proposé en téléchargement. Il contient les exports Moodle: un zip pour tous les QI et un zip par KFP. Les questions seront automatiquement nommées</li>
      <li>Rendez-vous sur Teia et cliquez sur "Importer" puis:</li>
      <ul><li>Décompresser le dossier compressé téléchargé</li>
      <li>Glisser-déposer le fichier "gift_output.zip" et validé l'import </li>
    <li>De même pour chaque fichier KFP mais <strong>il faut sélectionner "QTI" dans l'import</strong> et glisser le fichiers de chaque KFP</li></ul>
    </ol>
    <h3 id="video" style="text-align: center; margin-top: 40px;">📹 Démonstration vidéo</h3>
      <div style="display: flex; justify-content: center;">
      <video width="600" controls>
      <source src="{% static 'converter/videos/tuto.mp4' %}" type="video/mp4">
      Votre navigateur ne supporte pas la vidéo HTML5.
      </video>
</div>

  </section>
  <script>
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('fade-in');
          observer.unobserve(entry.target);
        }
      });
    });
  
    document.querySelectorAll('.reveal').forEach((el) => {
      observer.observe(el);
    });
  </script> 
  <footer style="text-align: center; padding: 20px; font-size: 0.9em; color: #777;">
    <p>Réalisé par Dr Edouard Baudouin (Paul Brousse) — projet libre à usage pédagogique </br>
    github: </p>
   </footer>
</body>
</html>
